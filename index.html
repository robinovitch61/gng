<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ralph & Miriam, through 60 and beyond.</title>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="description"
        content="A website celebrating the anniversary of the world's greatest parents, grandparents, and great-grandparents."/>
  <link rel="stylesheet" type="text/css" href="style.css"/>
  <link rel="icon" href="img/favicon.png">
</head>
<body>
<div class="content">
  <h1>Ralph & Miriam, through 60 years and beyond!</h1>
  <h2>A selection of events in the 60+ years of marriage, love, and friendship of our families beloved parents,
    grandparents, and great-grandparents.</h2>
  <div class="controls">
  </div>
  <h3 class="subtitle">Press a button above.</h3>
  <div class="stuff"></div>
</div>
</body>
<script type="module">
  import data from './data.js'

  const MARRIED = new Date("1963-01-09")
  const NOW = new Date()
  const ms = NOW - MARRIED
  const years = ms / 31556952000
  const weeks = years * 52.143
  const days = years * 365.25

  const stuff = document.querySelectorAll(".content .stuff")[0]
  const controls = document.querySelectorAll(".content .controls")[0]
  const subtitle = document.querySelectorAll(".content .subtitle")[0]

  data.forEach(item => {
    const btn = document.createElement("button")
    btn.type = "button"
    btn.value = item.id
    btn.innerHTML = item.id
    btn.onclick = () => {
      const child = document.createElement("div")
      const img = document.createElement("img")
      img.src = `/img/${item.imgFile}`
      child.appendChild(img)

      let count = 0;
      if (!!item.perWeek) {
        count = Math.floor(item.perWeek * weeks)
      } else if (!!item.perYear) {
        count = Math.floor(item.perYear * years)
      }

      subtitle.innerHTML = `${item.prefix} ${count} ${item.suffix}!`

      stuff.innerHTML = ''
      for (let i = 0; i < count; i++) {
        stuff.appendChild(child.cloneNode(true))
      }
    }
    controls.appendChild(btn)
  })
</script>
</html>
